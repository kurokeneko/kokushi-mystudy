<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ‰ã‚­ãƒ‰ã‚­æ˜¼é£¯ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #fdfbfb, #ebedee);
    text-align: center;
    padding: 30px;
  }

  h1 {
    margin-bottom: 20px;
  }

  select, button {
    font-size: 16px;
    padding: 10px;
    width: 100%;
    max-width: 320px;
    margin-bottom: 15px;
  }

  #roulette {
    margin-top: 30px;
    font-size: 28px;
    font-weight: bold;
    height: 50px;
    transition: transform 0.2s;
  }

  .shake {
    animation: shake 0.15s infinite;
  }

  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    50% { transform: translateX(4px); }
    75% { transform: translateX(-4px); }
    100% { transform: translateX(0); }
  }

  .final {
    color: #e60023;
    animation: pop 0.6s ease-out;
  }

  @keyframes pop {
    0% { transform: scale(0.8); opacity: 0; }
    60% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); }
  }
</style>
</head>
<body>

<h1>ğŸ´ ä»Šæ—¥ã®ãŠæ˜¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>

<select id="mood">
  <option value="å’Œé£Ÿ">å’Œé£Ÿæ°—åˆ†</option>
  <option value="æ´‹é£Ÿ">æ´‹é£Ÿæ°—åˆ†</option>
  <option value="ä¸­è¯">ä¸­è¯æ°—åˆ†</option>
  <option value="ã‚¢ãƒ¡ãƒªã‚«ãƒ³">ã‚¢ãƒ¡ãƒªã‚«ãƒ³</option>
  <option value="ãƒ©ãƒ¼ãƒ¡ãƒ³">ãƒ©ãƒ¼ãƒ¡ãƒ³æ°—åˆ†</option>
  <option value="ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯">ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯æ°—åˆ†</option>
  <option value="è²·ã„å‡ºã—">è²·ã„å‡ºã—æ°—åˆ†</option>
  <option value="all">ãªã‚“ã§ã‚‚ã„ã„</option>
</select>

<button onclick="startRoulette()">å›ã™ï¼</button>

<div id="roulette">ï¼Ÿï¼Ÿï¼Ÿ</div>

<script>
const shops = [
  { name: "æ¾å±‹", star: 1, mood: ["å’Œé£Ÿ"] },
  { name: "ã™ãå®¶", star: 2, mood: ["å’Œé£Ÿ"] },
  { name: "ã¯ãªã¾ã‚‹ã†ã©ã‚“", star: 2, mood: ["å’Œé£Ÿ"] },
  { name: "é•·å´ã¡ã‚ƒã‚“ã½ã‚“", star: 2, mood: ["å’Œé£Ÿ"] },

  { name: "ã‚µã‚¤ã‚¼ãƒªãƒ¤", star: 5, mood: ["æ´‹é£Ÿ"] },
  { name: "ã‚³ã‚³ã‚¹", star: 2, mood: ["æ´‹é£Ÿ"] },

  { name: "æ±æ–¹é¤ƒå­æˆ¿", star: 3, mood: ["ä¸­è¯"] },
  { name: "ä¸€å“é¦™", star: 2, mood: ["ä¸­è¯"] },

  { name: "ãƒãƒƒã‚¯", star: 5, mood: ["ã‚¢ãƒ¡ãƒªã‚«ãƒ³"] },
  { name: "ã‚±ãƒ³ã‚¿ãƒƒã‚­ãƒ¼", star: 4, mood: ["ã‚¢ãƒ¡ãƒªã‚«ãƒ³"] },
  { name: "ã‚¦ã‚§ãƒ³ãƒ‡ã‚£ãƒ¼ã‚º", star: 3, mood: ["ã‚¢ãƒ¡ãƒªã‚«ãƒ³"] },

  { name: "TSUKASA", star: 3, mood: ["ãƒ©ãƒ¼ãƒ¡ãƒ³"] },
  { name: "ä¸ƒå¿—", star: 2, mood: ["ãƒ©ãƒ¼ãƒ¡ãƒ³"] },
  { name: "å¹¸æ¥½è‹‘", star: 2, mood: ["ãƒ©ãƒ¼ãƒ¡ãƒ³"] },

  { name: "ã‚­ãƒ³ã‚°ã‚«ãƒªãƒ¼", star: 3, mood: ["ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯"] },
  { name: "ãƒãƒªã‚«", star: 3, mood: ["ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯"] },

  { name: "ã‚¹ãƒ¼ãƒ‘ãƒ¼", star: 4, mood: ["è²·ã„å‡ºã—"] },
  { name: "ã‚³ãƒ³ãƒ“ãƒ‹", star: 2, mood: ["è²·ã„å‡ºã—"] }
];

function buildPool(mood) {
  let pool = [];
  shops.forEach(s => {
    let weight = mood === "all" ? 1 : s.star;
    if (mood !== "all" && s.mood.includes(mood)) {
      weight *= 2;
    }
    for (let i = 0; i < weight; i++) pool.push(s.name);
  });
  return pool;
}

function startRoulette() {
  const mood = document.getElementById("mood").value;
  const pool = buildPool(mood);
  const display = document.getElementById("roulette");

  display.className = "shake";
  let count = 0;
  let speed = 50;
  const maxCount = 30 + Math.floor(Math.random() * 20);

  function spin() {
    display.textContent = pool[Math.floor(Math.random() * pool.length)];
    count++;
    speed += 10; // ã ã‚“ã ã‚“æ¸›é€Ÿ

    if (count < maxCount) {
      setTimeout(spin, speed);
    } else {
      display.className = "final";
      display.textContent = `ğŸ¯ ${display.textContent}ï¼`;
    }
  }

  spin();
}
</script>

</body>
</html>