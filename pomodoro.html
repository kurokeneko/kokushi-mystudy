<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ポモドーロタイマー</title>

<style>
body {
  font-family: sans-serif;
  text-align: center;
  background: #f5f5f5;
  padding: 40px;
}

h1 {
  margin-bottom: 10px;
}

#mode {
  font-size: 18px;
  margin-bottom: 20px;
}

#time {
  font-size: 64px;
  margin: 20px 0;
}

.bar {
  width: 300px;
  height: 20px;
  background: #ddd;
  margin: 0 auto 20px;
  border-radius: 10px;
  overflow: hidden;
}

.progress {
  height: 100%;
  width: 0%;
  background: #4caf50;
  transition: width 0.3s;
}

button {
  padding: 10px 20px;
  margin: 5px;
  font-size: 16px;
}
</style>
</head>

<body>

<h1>ポモドーロタイマー</h1>
<div id="mode">作業時間</div>
<div id="time">25:00</div>

<div class="bar">
  <div class="progress" id="progress"></div>
</div>

<button onclick="start()">開始</button>
<button onclick="stop()">停止</button>
<button onclick="reset()">リセット</button>

<script>
let workTime = 25 * 60;
let breakTime = 5 * 60;
let totalTime = workTime;
let remaining = totalTime;
let isWork = true;
let timer = null;

const timeEl = document.getElementById("time");
const modeEl = document.getElementById("mode");
const progressEl = document.getElementById("progress");

function updateDisplay() {
  const min = String(Math.floor(remaining / 60)).padStart(2, "0");
  const sec = String(remaining % 60).padStart(2, "0");
  timeEl.textContent = `${min}:${sec}`;

  const percent = ((totalTime - remaining) / totalTime) * 100;
  progressEl.style.width = percent + "%";
}

function start() {
  if (timer) return;

  timer = setInterval(() => {
    remaining--;
    updateDisplay();

    if (remaining <= 0) {
      clearInterval(timer);
      timer = null;

      alert(isWork ? "作業終了！休憩しよう" : "休憩終了！作業再開");

      isWork = !isWork;
      totalTime = isWork ? workTime : breakTime;
      remaining = totalTime;
      modeEl.textContent = isWork ? "作業時間" : "休憩時間";
      progressEl.style.width = "0%";
      updateDisplay();
    }
  }, 1000);
}

function stop() {
  clearInterval(timer);
  timer = null;
}

function reset() {
  stop();
  isWork = true;
  totalTime = workTime;
  remaining = totalTime;
  modeEl.textContent = "作業時間";
  progressEl.style.width = "0%";
  updateDisplay();
}

updateDisplay();
</script>

</body>
</html>